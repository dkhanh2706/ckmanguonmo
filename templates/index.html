{% extends "base.html" %}
{% block title %}Yuki Meal Planner â€“ LÃªn menu hÃ ng ngÃ y thÃ´ng minh{% endblock %}

{% block content %}
<div class="page-wrapper home-page">
  <!-- =============== HERO SECTION =============== -->
  <section class="card hero-card">
    <div class="home-hero">
      <h1 class="title">Meal Planner â€“ LÃªn menu hÃ ng ngÃ y ğŸ±</h1>
      <p class="subtitle">
        LÃªn thá»±c Ä‘Æ¡n cho cáº£ tuáº§n theo phong cÃ¡ch Nháº­t Báº£n: gá»n nháº¹, Ä‘á»§ dinh
        dÆ°á»¡ng, vÃ  khÃ´ng cÃ²n pháº£i Ä‘au Ä‘áº§u vá»›i cÃ¢u há»i "HÃ´m nay Äƒn gÃ¬?" má»—i ngÃ y.
      </p>

      <div class="hero-actions">
        <a href="/login" class="btn primary">ğŸ¯ Báº¯t Ä‘áº§u lÃªn menu hÃ´m nay</a>
        <a href="/register" class="btn ghost">
          âœ¨ Táº¡o tÃ i khoáº£n Ä‘á»ƒ lÆ°u thá»±c Ä‘Æ¡n
        </a>
      </div>

      <div class="hero-benefits-box">
        <ul class="home-hero-list">
          <li>Láº­p káº¿ hoáº¡ch bá»¯a sÃ¡ng - trÆ°a - tá»‘i cho tá»«ng ngÃ y trong tuáº§n</li>
          <li>LÆ°u trá»¯ cÃ´ng thá»©c yÃªu thÃ­ch vÃ  tÃ¡i sá»­ dá»¥ng cho tuáº§n sau</li>
          <li>Tá»± Ä‘á»™ng táº¡o danh sÃ¡ch nguyÃªn liá»‡u cáº§n mua sáº¯m</li>
          <li>Gá»£i Ã½ mÃ³n Äƒn theo cháº¿ Ä‘á»™ dinh dÆ°á»¡ng vÃ  sá»Ÿ thÃ­ch</li>
        </ul>
      </div>
    </div>

    <div class="home-hero-aside">
      <div class="hero-stats-card">
        <p class="hero-stats-label">Thá»‘ng kÃª nhanh</p>
        <div class="hero-stats-grid">
          <div class="hero-stat-item">
            <span class="hero-stat-number">7</span>
            <span class="hero-stat-text">NgÃ y / tuáº§n</span>
          </div>
          <div class="hero-stat-item">
            <span class="hero-stat-number">3</span>
            <span class="hero-stat-text">Bá»¯a / ngÃ y</span>
          </div>
          <div class="hero-stat-item">
            <span class="hero-stat-number">âˆ</span>
            <span class="hero-stat-text">CÃ´ng thá»©c</span>
          </div>
        </div>
      </div>

      <div class="hero-mini-card">
        <p class="hero-mini-title">Gá»£i Ã½ hÃ´m nay</p>
        <ul class="hero-menu-list">
          <li><span class="dot"></span> SÃ¡ng: Yáº¿n máº¡ch trÃ¡i cÃ¢y</li>
          <li><span class="dot"></span> TrÆ°a: CÆ¡m gÃ  Ã¡p cháº£o + salad</li>
          <li><span class="dot"></span> Tá»‘i: MÃ¬ Udon rau cá»§</li>
        </ul>
        <a href="/meal-planner" class="hero-mini-link">
          Xem lá»‹ch Äƒn uá»‘ng chi tiáº¿t â†’
        </a>
      </div>
    </div>
  </section>

  <!-- =============== SECTION: HÃ”M NAY Ä‚N GÃŒ? =============== -->
  <section class="section section-intro">
    <div class="section-header">
      <h2 class="section-title">HÃ´m nay Äƒn gÃ¬? Äá»ƒ KhÃ¡nh vÃ  Tiáº¿n lo cho báº¡n ğŸ¥°</h2>
      <p class="section-subtitle">
        Chá»‰ cáº§n vÃ i phÃºt má»—i ngÃ y, báº¡n Ä‘Ã£ cÃ³ thá»±c Ä‘Æ¡n gá»n gÃ ng, há»£p tÃºi tiá»n vÃ 
        phÃ¹ há»£p vá»›i lá»‹ch sinh hoáº¡t cá»§a cáº£ gia Ä‘Ã¬nh.
      </p>
    </div>

    <div class="info-grid">
      <article class="info-card">
        <h3 class="info-title">KhÃ´ng cÃ²n quyáº¿t Ä‘á»‹nh vá»™i vÃ ng</h3>
        <p class="info-text">
          LÃªn káº¿ hoáº¡ch trÆ°á»›c cho cáº£ tuáº§n, trÃ¡nh cáº£nh má»Ÿ tá»§ láº¡nh mÃ  khÃ´ng biáº¿t
          náº¥u gÃ¬, háº¡n cháº¿ Ä‘áº·t Ä‘á»“ Äƒn nhanh vÃ¬ â€œlÆ°á»i nghÄ©â€.
        </p>
      </article>

      <article class="info-card">
        <h3 class="info-title">Tá»‘i Æ°u chi phÃ­ mua sáº¯m</h3>
        <p class="info-text">
          LÃªn danh sÃ¡ch Ä‘i chá»£ theo thá»±c Ä‘Æ¡n, mua Ä‘Ãºng â€“ mua Ä‘á»§, giáº£m lÃ£ng phÃ­
          thá»±c pháº©m vÃ  bá»›t tá»‘n tiá»n â€œmua cho vuiâ€.
        </p>
      </article>

      <article class="info-card">
        <h3 class="info-title">Ä‚n uá»‘ng lÃ nh máº¡nh hÆ¡n</h3>
        <p class="info-text">
          Chá»§ Ä‘á»™ng cÃ¢n báº±ng rau, Ä‘áº¡m, tinh bá»™t vÃ  nÆ°á»›c uá»‘ng trong tá»«ng bá»¯a, dá»…
          dÃ ng giá»¯ thÃ³i quen Äƒn uá»‘ng lÃ nh máº¡nh lÃ¢u dÃ i.
        </p>
      </article>
    </div>
  </section>

  <!-- =============== SECTION: THÆ¯ VIá»†N CÃ”NG THá»¨C =============== -->
  <section class="section">
    <div class="card">
      <div class="feature-row">
        <div class="feature-icon">ğŸ“š</div>
        <div class="feature-content">
          <h2>ThÆ° viá»‡n cÃ´ng thá»©c</h2>
          <p>
            LÆ°u láº¡i cÃ¡c mÃ³n báº¡n yÃªu thÃ­ch, phÃ¢n loáº¡i theo thá»i gian náº¥u, Ä‘á»™ khÃ³,
            cháº¿ Ä‘á»™ Äƒn (healthy, eat clean, chay...).
          </p>
          <ul class="feature-list">
            <li>LÆ°u tÃªn mÃ³n, nguyÃªn liá»‡u, bÆ°á»›c náº¥u, ghi chÃº</li>
            <li>Upload hÃ¬nh áº£nh mÃ³n Äƒn</li>
            <li>Dá»… dÃ ng tÃ¬m kiáº¿m & lá»c theo tag</li>
          </ul>
          <a href="/recipes" class="link">Xem cÃ´ng thá»©c â†’</a>
        </div>
      </div>
    </div>
  </section>

  <!-- =============== SECTION: DANH SÃCH MUA Sáº®M =============== -->
  <section class="section">
    <div class="card">
      <div class="feature-row">
        <div class="feature-icon">ğŸ›’</div>
        <div class="feature-content">
          <h2>Danh sÃ¡ch mua sáº¯m thÃ´ng minh</h2>
          <p>
            Tá»± Ä‘á»™ng gom nguyÃªn liá»‡u tá»« thá»±c Ä‘Æ¡n tuáº§n thÃ nh danh sÃ¡ch mua sáº¯m.
            Khi Ä‘i chá»£ chá»‰ cáº§n má»Ÿ Ä‘iá»‡n thoáº¡i Ä‘á»ƒ tick dáº§n.
          </p>
          <ul class="feature-list">
            <li>NhÃ³m nguyÃªn liá»‡u theo loáº¡i (thá»‹t, rau, gia vá»‹...)</li>
            <li>ÄÃ¡nh dáº¥u Ä‘Ã£ mua / chÆ°a mua</li>
            <li>Giáº£m tá»‘i Ä‘a viá»‡c quÃªn Ä‘á»“</li>
          </ul>
          <a href="/shopping-list" class="link">Xem danh sÃ¡ch mua sáº¯m â†’</a>
        </div>
      </div>
    </div>
  </section>

  <!-- =============== SECTION: CÃ”NG THá»¨C Gá»¢I Ã =============== -->
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">CÃ´ng thá»©c gá»£i Ã½ cho báº¡n hÃ´m nay ğŸœ</h2>
      <p class="section-subtitle">
        Má»™t vÃ i gá»£i Ã½ nhanh. Khi cÃ³ thá»i gian, báº¡n cÃ³ thá»ƒ tá»± thÃªm cÃ´ng thá»©c cá»§a
        riÃªng mÃ¬nh.
      </p>
    </div>

    <div class="recipes-grid">
      <article class="recipe-card">
        <div class="recipe-header">
          <h3>BÃ¡nh mÃ¬ trá»©ng & salad</h3>
          <span class="recipe-tag">Bá»¯a sÃ¡ng</span>
        </div>
        <p class="recipe-text">
          ÄÆ¡n giáº£n, nhanh, Ä‘á»§ Ä‘áº¡m &amp; cháº¥t xÆ¡. PhÃ¹ há»£p cho nhá»¯ng ngÃ y báº­n rá»™n
          Ä‘i há»c / Ä‘i lÃ m.
        </p>
        <div class="recipe-footer">
          <span>â± 15 phÃºt</span>
          <span>â­ Dá»…</span>
        </div>
      </article>

      <article class="recipe-card">
        <div class="recipe-header">
          <h3>CÆ¡m gÃ  Ã¡p cháº£o sá»‘t teriyaki</h3>
          <span class="recipe-tag">Bá»¯a trÆ°a</span>
        </div>
        <p class="recipe-text">
          GÃ  Ã¡p cháº£o thÆ¡m, Äƒn kÃ¨m cÆ¡m tráº¯ng vÃ  rau luá»™c. Há»£p kháº©u vá»‹ nhiá»u
          ngÆ°á»i, dá»… lÃ m nhiá»u pháº§n.
        </p>
        <div class="recipe-footer">
          <span>â± 30 phÃºt</span>
          <span>â­ Trung bÃ¬nh</span>
        </div>
      </article>

      <article class="recipe-card">
        <div class="recipe-header">
          <h3>MÃ¬ Udon rau cá»§ &amp; náº¥m</h3>
          <span class="recipe-tag">Bá»¯a tá»‘i</span>
        </div>
        <p class="recipe-text">
          NÆ°á»›c dÃ¹ng thanh, nhiá»u rau cá»§ vÃ  náº¥m, phÃ¹ há»£p cho bá»¯a tá»‘i nháº¹ nhÃ ng,
          dá»… tiÃªu.
        </p>
        <div class="recipe-footer">
          <span>â± 25 phÃºt</span>
          <span>â­ Dá»…</span>
        </div>
      </article>
    </div>
  </section>

  <!-- =============== SECTION: CÃCH HOáº T Äá»˜NG =============== -->
  <section class="section section-how">
    <div class="section-header">
      <h2 class="section-title">á»¨ng dá»¥ng hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?</h2>
      <p class="section-subtitle">
        Báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u vá»›i vÃ i bÆ°á»›c cá»±c ká»³ Ä‘Æ¡n giáº£n, khÃ´ng cáº§n quÃ¡ nhiá»u
        thao tÃ¡c phá»©c táº¡p.
      </p>
    </div>

    <div class="how-steps">
      <div class="how-step">
        <div class="how-step-number">1</div>
        <div class="how-step-content">
          <h3 class="how-step-title">Táº¡o tÃ i khoáº£n (hoáº·c dÃ¹ng luÃ´n)</h3>
          <p class="how-step-text">
            Báº¡n cÃ³ thá»ƒ Ä‘Äƒng nháº­p Ä‘á»ƒ lÆ°u láº¡i thá»±c Ä‘Æ¡n &amp; cÃ´ng thá»©c, hoáº·c dÃ¹ng
            thá»­ nhanh mÃ  khÃ´ng cáº§n tÃ i khoáº£n, tÃ¹y theo nhu cáº§u.
          </p>
        </div>
      </div>

      <div class="how-step">
        <div class="how-step-number">2</div>
        <div class="how-step-content">
          <h3 class="how-step-title">ThÃªm vÃ i cÃ´ng thá»©c yÃªu thÃ­ch</h3>
          <p class="how-step-text">
            Báº¯t Ä‘áº§u báº±ng nhá»¯ng mÃ³n báº¡n thÆ°á»ng náº¥u nháº¥t: trá»©ng chiÃªn, cÃ¡ kho,
            canh rau... Sau Ä‘Ã³ cÃ³ thá»ƒ tá»« tá»« bá»• sung thÃªm.
          </p>
        </div>
      </div>

      <div class="how-step">
        <div class="how-step-number">3</div>
        <div class="how-step-content">
          <h3 class="how-step-title">
            LÃªn thá»±c Ä‘Æ¡n tuáº§n &amp; xuáº¥t danh sÃ¡ch mua sáº¯m
          </h3>
          <p class="how-step-text">
            KÃ©o tháº£ mÃ³n Äƒn vÃ o tá»«ng ngÃ y, sau Ä‘Ã³ xuáº¥t danh sÃ¡ch nguyÃªn liá»‡u Ä‘á»ƒ
            Ä‘i chá»£. Má»—i tuáº§n chá»‰ cáº§n chá»‰nh sá»­a má»™t chÃºt lÃ  xong.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- =============== SECTION: CTA CUá»I TRANG =============== -->
  <section class="section">
    <div class="cta-section">
      <div class="cta-inner">
        <h2>Sáºµn sÃ ng Ä‘á»ƒ bá»¯a Äƒn gá»n gÃ ng hÆ¡n chÆ°a? ğŸŒŸ</h2>
        <p>
          DÃ¹ báº¡n lÃ  sinh viÃªn á»Ÿ trá», ngÆ°á»i Ä‘i lÃ m báº­n rá»™n hay ná»™i trá»£ chÃ­nh
          trong gia Ä‘Ã¬nh, Yuki Meal Planner sáº½ giÃºp báº¡n quáº£n lÃ½ bá»¯a Äƒn má»™t cÃ¡ch
          nháº¹ nhÃ ng vÃ  thÃ´ng minh.
        </p>
        <div class="cta-actions">
          <a href="/register" class="btn primary">Báº¯t Ä‘áº§u miá»…n phÃ­</a>
          <a href="/recipes" class="btn ghost">Xem thá»­ thÆ° viá»‡n cÃ´ng thá»©c</a>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Hiá»‡u á»©ng hover nháº¹ cho card
    const cards = document.querySelectorAll(".card, .recipe-card");
    cards.forEach((card) => {
      card.addEventListener("mouseenter", () => {
        card.style.transform = "translateY(-4px)";
      });
      card.addEventListener("mouseleave", () => {
        card.style.transform = "translateY(0)";
      });
    });

    // ======================
    //  KIá»‚M TRA ÄÃƒ ÄÄ‚NG NHáº¬P?
    // ======================
    let rawUser = localStorage.getItem("user");
    let user = null;
    try {
      user = rawUser ? JSON.parse(rawUser) : null;
    } catch (e) {
      user = null;
    }

    const isLoggedIn = !!user;

    if (!isLoggedIn) {
      return; // chÆ°a Ä‘Äƒng nháº­p thÃ¬ giá»¯ nguyÃªn giao diá»‡n
    }

    // 1ï¸âƒ£ Äá»”I HERO THÃ€NH CHÃ€O Má»ªNG + áº¨N NÃšT "Táº O TÃ€I KHOáº¢N..."
    const heroTitle = document.querySelector(".hero-card .title");
    const heroSubtitle = document.querySelector(".hero-card .subtitle");
    const createAccountBtn = document.querySelector(
      '.hero-card a[href="/register"]'
    );

    const displayName =
      (user && (user.full_name || user.email)) || "báº¡n";

    if (heroTitle) {
      heroTitle.textContent = `ChÃ o má»«ng trá»Ÿ láº¡i, ${displayName} ğŸ‘‹`;
    }
    if (heroSubtitle) {
      heroSubtitle.textContent =
        "Tiáº¿p tá»¥c lÃªn thá»±c Ä‘Æ¡n cho tuáº§n nÃ y cÃ¹ng Yuki Meal Planner.";
    }
    if (createAccountBtn) {
      createAccountBtn.remove();
    }

    // 2ï¸âƒ£ áº¨N SECTION CTA "Sáºµn sÃ ng Ä‘á»ƒ bá»¯a Äƒn gá»n gÃ ng hÆ¡n chÆ°a?"
    const ctaSection = document.querySelector(".cta-section");
    if (ctaSection && ctaSection.parentElement) {
      ctaSection.parentElement.style.display = "none";
    }

    // 3ï¸âƒ£ Äá»”I PHáº¦N 'á»¨ng dá»¥ng hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?'
    //    â†’ '3 lá»£i Ã­ch khi lÃªn menu há»£p lÃ½'
    const howSection = document.querySelector(".section-how");
    const howTitle = howSection?.querySelector(".section-title");
    const howSubtitle = howSection?.querySelector(".section-subtitle");
    const howSteps = howSection?.querySelector(".how-steps");

    if (howTitle) {
      howTitle.textContent = "3 lá»£i Ã­ch khi báº¡n lÃªn menu há»£p lÃ½";
    }
    if (howSubtitle) {
      howSubtitle.textContent =
        "Khi cÃ³ thá»±c Ä‘Æ¡n rÃµ rÃ ng, viá»‡c Äƒn uá»‘ng má»—i ngÃ y sáº½ nháº¹ nhÃ ng, tiáº¿t kiá»‡m vÃ  lÃ nh máº¡nh hÆ¡n ráº¥t nhiá»u.";
    }
    if (howSteps) {
      howSteps.innerHTML = `
        <div class="how-step">
          <div class="how-step-number">1</div>
          <div class="how-step-content">
            <h3 class="how-step-title">Tiáº¿t kiá»‡m thá»i gian & nÄƒng lÆ°á»£ng</h3>
            <p class="how-step-text">
              KhÃ´ng pháº£i suy nghÄ© "tá»‘i nay Äƒn gÃ¬" má»—i ngÃ y ná»¯a. Báº¡n chá»‰ cáº§n má»Ÿ app,
              xem thá»±c Ä‘Æ¡n Ä‘Ã£ lÃªn sáºµn vÃ  lÃ m theo, Ä‘á»¡ má»‡t Ä‘áº§u ráº¥t nhiá»u.
            </p>
          </div>
        </div>
        <div class="how-step">
          <div class="how-step-number">2</div>
          <div class="how-step-content">
            <h3 class="how-step-title">Kiá»ƒm soÃ¡t chi phÃ­ Äƒn uá»‘ng</h3>
            <p class="how-step-text">
              LÃªn menu trÆ°á»›c giÃºp báº¡n mua nguyÃªn liá»‡u Ä‘Ãºng káº¿ hoáº¡ch, trÃ¡nh mua thá»«a
              hoáº·c mua Ä‘á»“ khÃ´ng cáº§n thiáº¿t, tá»« Ä‘Ã³ tiáº¿t kiá»‡m Ä‘Æ°á»£c khÃ¡ nhiá»u tiá»n má»—i thÃ¡ng.
            </p>
          </div>
        </div>
        <div class="how-step">
          <div class="how-step-number">3</div>
          <div class="how-step-content">
            <h3 class="how-step-title">Ä‚n uá»‘ng lÃ nh máº¡nh & cÃ¢n báº±ng hÆ¡n</h3>
            <p class="how-step-text">
              Khi chá»§ Ä‘á»™ng sáº¯p xáº¿p cÃ¡c bá»¯a Äƒn, báº¡n dá»… dÃ ng cÃ¢n báº±ng rau, Ä‘áº¡m, tinh bá»™t,
              trÃ¡i cÃ¢yâ€¦ thay vÃ¬ Äƒn theo cáº£m há»©ng, giÃºp sá»©c khá»e á»•n Ä‘á»‹nh hÆ¡n lÃ¢u dÃ i.
            </p>
          </div>
        </div>
      `;
    }
  });
</script>
{% endblock %}
